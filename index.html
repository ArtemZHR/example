<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text ex</title>
</head>
<body>
<form>
    <textarea id="First" type="text" placeholder="First words" value=""></textarea>
    <textarea id="Second" type="text" placeholder="Second words" value=""></textarea>
    <input type="file" onchange="readFile(this)">

</form>

<span id="minDis"></span>
<span id="maxDis"></span>

</body>
<script>
    function readFile(inputFile) {
        let file = inputFile.files[0];
        let reader = new FileReader();
        reader.readAsText(file);

        reader.onload = function () {
            const regex = /[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g;
            const textData = reader.result.toLowerCase().replace(regex, '').split(' ');
            console.log(textData);

            let firstWords = document.getElementById("First").value.toLowerCase(),
                firstIndex = 0,
                secondWords = document.getElementById("Second").value.toLowerCase(),
                secondIndex = 0,
                distance = 0,
                minDistance = 0,
                maxDistance = 0;


            // file = file.split(" ");

            for (let i = 0; i < textData.length; i++) {

                if (textData[i] === firstWords && firstIndex === 0) {
                    firstIndex = i;
                }

                if (textData[i] === secondWords) {
                    secondIndex = i;
                }

                if (firstIndex !== 0 && secondIndex !== 0) {
                    if (secondIndex > firstIndex) distance = secondIndex - firstIndex;
                    else distance = firstIndex - secondIndex; //revers search

                    if (minDistance === 0) {
                        minDistance = distance;
                    } else if (maxDistance < distance) {
                        maxDistance = distance;
                    }
                }
            }

            console.log(` Minimum distance between words ${minDistance}\n\r Maximal distance between words ${maxDistance}`);

            document.getElementById('minDis').innerHTML = String(minDistance);

            document.getElementById('maxDis').innerHTML = String(maxDistance);
        };

        reader.onerror = function () {
            console.log(reader.error);
        };
    }
</script>
</html>
